import{G as _,r as u,j as e,e as h,u as L}from"./index-DtPgIYVm.js";import{b as M}from"./index-ChVYCwV2.js";import{T as S}from"./Title-sx3ptn_O.js";import{P as E}from"./ProgressBar-1rnQmbvm.js";function P(n){return _({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M240,120H215.63A88.13,88.13,0,0,0,136,40.37V16a8,8,0,0,0-16,0V40.37A88.13,88.13,0,0,0,40.37,120H16a8,8,0,0,0,0,16H40.37A88.13,88.13,0,0,0,120,215.63V240a8,8,0,0,0,16,0V215.63A88.13,88.13,0,0,0,215.63,136H240a8,8,0,0,0,0-16ZM128,200a72,72,0,1,1,72-72A72.08,72.08,0,0,1,128,200Zm40-72a40,40,0,1,1-40-40A40,40,0,0,1,168,128Z"},child:[]}]})(n)}const C=({addAddress:n,editedAddress:c=null})=>{const[s,a]=u.useState({name:"",mobile:"",flat:"",city:"",state:"",country:"",pincode:"",latLong:""});u.useEffect(()=>{c&&a(c)},[c]);const x=async(t,g)=>{var v,N,A,w,k;let d=(await h.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${g}&key=AIzaSyAY1cLZkQ8z18FMknelsZKAUMoLhMBUXEA`)).data.results[0].address_components,m="",p="",j="",y="",b="";m=(v=d.find(o=>o.types.includes("locality")))==null?void 0:v.long_name,p=(N=d.find(o=>o.types.includes("administrative_area_level_1")))==null?void 0:N.long_name,j=(A=d.find(o=>o.types.includes("country")))==null?void 0:A.long_name,y=(w=d.find(o=>o.types.includes("postal_code")))==null?void 0:w.long_name,b=(k=d.find(o=>o.types.includes("political")))==null?void 0:k.long_name,console.log(b,m,p,j,y),a({...s,city:m,state:p,pincode:y,country:j,flat:b})},l=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{a({...s,latLong:t.coords.latitude+","+t.coords.longitude}),x(t.coords.latitude,t.coords.longitude)},()=>{alert("Permission denied")}):alert("Geolocation not supported")},i=async t=>{t.preventDefault(),n(s),a({name:"",mobile:"",flat:"",city:"",state:"",country:"",latLong:"",pincode:""})};return e.jsx("div",{className:"text-sm border-2  border-slate-300 shadow-md px-10  py-5 mt-5",children:e.jsxs("form",{onSubmit:i,children:[e.jsx("div",{children:e.jsxs("button",{className:"flex bg-slate-200 py-2 px-4 rounded-md ",onClick:t=>l(),children:[e.jsx(P,{className:"mr-2 text-lg"})," use my location"]})}),e.jsxs("div",{className:"flex flex-col text-sm mt-5 ",children:[e.jsx("label",{className:"",children:"Name"}),e.jsx("input",{type:"text",value:s.name,className:"mt-1 rounded-lg border-2 px-4 border-gray-300 shadow-black w-64 h-10",onChange:t=>a({...s,name:t.target.value}),required:!0})]}),e.jsxs("div",{className:"flex flex-col text-sm mt-5 ",children:[e.jsx("label",{className:"",children:"Mobile"}),e.jsx("input",{type:"text",value:s.mobile,className:"mt-1 rounded-lg border-2 px-4 border-gray-300 shadow-black w-64 h-10",onChange:t=>a({...s,mobile:t.target.value}),required:!0})]}),e.jsxs("div",{className:"flex flex-col text-sm mt-5 ",children:[e.jsx("label",{className:"",children:"Flat, Building No."}),e.jsx("input",{type:"text",value:s.flat,className:"mt-1 rounded-lg border-2 px-4 border-gray-300 shadow-black w-64 h-10",onChange:t=>a({...s,flat:t.target.value}),required:!0})]}),e.jsxs("div",{className:"flex flex-col text-sm mt-5 ",children:[e.jsx("label",{className:"",children:"City"}),e.jsx("input",{type:"text",value:s.city,className:"mt-1 rounded-lg border-2 px-4 border-gray-300 shadow-black w-64 h-10",onChange:t=>a({...s,city:t.target.value}),required:!0})]}),e.jsxs("div",{className:"flex flex-col text-sm mt-5 ",children:[e.jsx("label",{className:"",children:"State"}),e.jsx("input",{type:"text",value:s.state,className:"mt-1 rounded-lg border-2 px-4 border-gray-300 shadow-black w-64 h-10",onChange:t=>a({...s,state:t.target.value}),required:!0})]}),e.jsxs("div",{className:"flex flex-col text-sm mt-5 ",children:[e.jsx("label",{className:"",children:"Pincode"}),e.jsx("input",{type:"text",value:s.pincode,className:"mt-1 rounded-lg border-2 px-4 border-gray-300 shadow-black w-64 h-10",onChange:t=>a({...s,pincode:t.target.value}),required:!0})]}),e.jsx("button",{className:"bg-slate-700 mt-5 text-white text-sm rounded-lg p-2",type:"submit",children:c?"Update Address":"Add Address"})]})})};function V(n){return _({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}const $=({addresses:n,deleteAddress:c,editedAddress:s})=>{const a=L(),x=()=>{a("/payment")};return e.jsx("div",{children:e.jsxs("div",{className:"",children:[e.jsx(S,{text1:"Manage",text2:"Address"}),e.jsx("ul",{children:n.map(l=>e.jsxs("li",{className:"border border-slate-300 shadow-lg p-5 mt-5",children:[e.jsxs("h5",{className:"",children:[" ",l.name]}),e.jsxs("p",{className:"text-sm text-slate-600 mt-2",children:[l.flat,", ",l.city,", ",l.state,", ",l.pincode]}),e.jsxs("p",{className:"text-sm text-slate-700",children:["+91 ",l.mobile]}),e.jsxs("div",{children:[e.jsx("button",{onClick:i=>s(l),className:"text-lg  text-[#2e9a66] mt-1",children:e.jsx(V,{})}),e.jsxs("button",{onClick:i=>c(l.id),className:"text-lg  text-[#2e9a66] mt-1 ml-3",children:[" ",e.jsx(M,{})," "]})]}),e.jsx("div",{children:e.jsx("button",{className:"bg-[#2e9a66] text-white text-sm py-2 px-4 rounded-md mt-2 font-semibold",onClick:x,children:"Delivery to this Address"})})]},l.id))})]})})},U=()=>{let[n,c]=u.useState(!1);const[s,a]=u.useState([]),[x,l]=u.useState(null),i="https://my-json-server.typicode.com/priyankauppada/address-json-server/addresses";u.useEffect(()=>{try{h.get(i).then(r=>{a(r.data)})}catch(r){console.log(r)}},[]);const t=async r=>{try{const d=await h.post(i,r);a([...s,d.data])}catch(d){console.log(d)}},g=async r=>{try{let d=await h.delete(`${i}/${r}`);a(s.filter(m=>m.id!==r))}catch(d){console.log(d)}},f=async r=>{let d=await h.put(`${i}/${r.id}`,r);a(s.map(m=>m.id===r.id?d.data:m)),l(null)};return e.jsxs("div",{className:"container mx-auto ",children:[e.jsx(E,{currentStep:1}),e.jsxs("div",{className:" grid md:grid-cols-2 ",children:[e.jsx($,{addresses:s,deleteAddress:g,editedAddress:l}),e.jsxs("div",{className:"flex flex-col items-center w-96  mx-auto p-5  ",children:[e.jsxs("button",{className:"bg-[#2e9a66] text-white py-2 px-6 rounded  hover:bg-gray-800",onClick:r=>c(!n),children:["  ",x?"Update Address":"+ Add New Address"]}),n&&e.jsxs("div",{children:[x?e.jsx(C,{editedAddress:x,addAddress:f}):e.jsx(C,{addAddress:t})," "]})]})]})]})};export{U as default};
