import{b as p,A as u,r as n,F as m,j as e,d as j,c as y}from"./index-DtPgIYVm.js";import{T as b}from"./Title-sx3ptn_O.js";import{F as N}from"./Features-DuZhlNt6.js";import{H as f,P as S}from"./ProductCard-YiAM6RMk.js";import"./index-ChVYCwV2.js";const v=async()=>await p.get(u.ALL_PRODUCTS),h=()=>{const{filterState:t,dispatch:o}=n.useContext(m),l=r=>{o({type:"SET_PRICE_RANGE",payload:Number(r.target.value)})},i=r=>{o({type:"SET_RATING",payload:r})},d=r=>{o({type:"SET_SECONDARY_SORT",payload:r})},c=()=>{o({type:"CLEAR_FILTERS"})};return e.jsxs("div",{className:"p-4 text-sm bg-white rounded-md shadow-md w-48 border-e-2 ml-8 ",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text- font-semibold mb-1",children:"Filter by Price "}),e.jsx("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:e.jsxs("span",{children:["Price Range: Rs ",t.priceRange]})}),e.jsx("input",{type:"range",min:"0",max:"50000",value:t.priceRange,onChange:l,className:"w-full"})]}),e.jsx("h2",{className:"font-semibold mt-4",children:"Filter by Ratings "}),e.jsx("div",{children:[4,3,2,1].map(r=>e.jsx("div",{className:"flex items-center cursor-pointer",onClick:()=>i(r),children:e.jsxs("span",{className:`text-xl ${t.rating===r?"text-green-600":"text-yellow-600"}`,children:["â˜…".repeat(r),"â˜†".repeat(5-r)]})},r))}),e.jsx("h2",{className:"font-semibold mb-2 mt-6",children:"Sort by Ratings"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"mb-1",children:[e.jsx("input",{type:"radio",name:"secondarySort",value:"ratingHighToLow",checked:t.secondarySort==="ratingHighToLow",onChange:()=>d("ratingHighToLow"),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Rating: High to Low"})]}),e.jsxs("label",{className:"mb-2",children:[e.jsx("input",{type:"radio",name:"secondarySort",value:"ratingLowToHigh",checked:t.secondarySort==="ratingLowToHigh",onChange:()=>d("ratingLowToHigh"),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Rating: Low to High"})]})]}),e.jsx("button",{onClick:c,className:"mt-6 px-4 py-2 bg-red-500 text-white font-bold rounded hover:bg-red-600",children:"Clear Filters"})]})},x=()=>{const{filterState:t,dispatch:o}=n.useContext(m),l=i=>{o({type:"SET_SORT",payload:i.target.value})};return e.jsx("div",{className:"",children:e.jsxs("select",{id:"sort",value:t.sort,onChange:l,className:"border border-gray-300 text-sm p-2 rounded-md",children:[e.jsx("option",{value:"relevant",children:"Sort by: Relevance"}),e.jsx("option",{value:"priceLowToHigh",children:"Sort by Price: Low to High"}),e.jsx("option",{value:"priceHighToLow",children:"Sort byPrice: High to Low"})]})})},H=()=>{const{categoryname:t}=j(),[o,l]=n.useState([]),[i,d]=n.useState(!1);n.useEffect(()=>{(async()=>{try{let s;t==="all Products"?s=await v():s=await y(t),l(s.data.products)}catch(s){console.error("Error fetching products:",s)}})()},[t]);const{filterState:c}=n.useContext(m),g=o.filter(a=>a.price<=c.priceRange&&a.rating>=c.rating).sort((a,s)=>{switch(c.primarySort){case"priceLowToHigh":return a.price-s.price;case"priceHighToLow":return s.price-a.price;case"relevant":default:return 0}}).sort((a,s)=>{switch(c.secondarySort){case"ratingHighToLow":return s.rating-a.rating;case"ratingLowToHigh":return a.rating-s.rating;default:return 0}});return e.jsxs("div",{className:"",children:[e.jsx(f,{}),e.jsxs("div",{className:"container px-2 md:mx-auto py-2",children:[e.jsxs("div",{className:"ml-4 md:ml-0 flex justify-between",children:[e.jsx(b,{text1:t||"All Products",text2:""}),e.jsx("div",{className:"hidden md:block  ",children:e.jsx(x,{})}),e.jsxs("button",{onClick:()=>{d(!i)},className:" md:hidden border-2 border-gray-300 text-sm  px-4 rounded-lg mr-4",children:[" ",e.jsx("span",{className:"text-xs",children:"ðŸŸ¢"})," Filters"]})]}),i?e.jsxs("div",{children:[e.jsx("div",{className:"block md:hidden",children:e.jsx(h,{})}),e.jsx("div",{className:"block md:hidden",children:e.jsx(x,{})})," "]}):""]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(h,{})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 mb-8 ",children:g.map((a,s)=>e.jsx(S,{data:a},s))})]}),e.jsx(N,{})]})};export{H as default};
